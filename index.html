<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Karinails.Design | Agendamento</title>
  <style>
    :root{
      --bg:#fff8f7; --card:#fff; --ink:#2d2a2a; --muted:#6f6366;
      --pink:#ff5aa5; --pink-100:#ffe7f2; --pink-200:#ffd3e7; --pink-300:#ffb9d9;
      --ring:rgba(255,90,165,.35);
    }
    *{box-sizing:border-box}
    body{margin:0;background:var(--bg);color:var(--ink);font-family:system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial,sans-serif}
    header{
      background:linear-gradient(120deg,#fff8f7 0%, #ffeef7 60%, #fff8f7 100%);
      text-align:center;padding:26px 16px
    }
    header img{width:140px;height:140px;object-fit:cover;border-radius:50%;border:4px solid #fff;box-shadow:0 6px 18px rgba(0,0,0,.12)}
    h1{margin:10px 0 6px}
    .wrap{max-width:1040px;margin:0 auto;padding:20px}
    .grid{display:grid;gap:20px}
    @media(min-width:900px){.grid{grid-template-columns:1fr 1fr 1fr}}

    /* Todos os cards rosinha */
    .card{background:var(--pink-100);border-radius:18px;padding:16px;box-shadow:0 6px 18px rgba(0,0,0,.07)}

    .service{display:flex;justify-content:space-between;gap:8px;margin-bottom:18px}
    .service h3{margin:0;font-size:15px;line-height:1.35}
    .yen{color:var(--pink);font-weight:800}

    /* Agendar */
    .input, .select{
      width:100%;border:1.5px solid var(--pink-200);background:#fff;
      padding:12px 14px;border-radius:14px;font-size:16px;outline:none;
      transition:.15s border-color, .15s box-shadow;
    }
    .input:focus, .select:focus{border-color:var(--pink-300);box-shadow:0 0 0 5px var(--ring)}
    .row{display:flex;gap:10px;flex-wrap:wrap}
    .row > div{flex:1 1 180px}
    .btn{
      width:100%;padding:12px 16px;border:none;border-radius:14px;
      background:var(--pink);color:#fff;font-weight:800;cursor:pointer;
      box-shadow:0 8px 18px rgba(255,90,165,.25)
    }
    .btn:hover{filter:brightness(.98)}

    .muted{color:var(--muted);font-size:13px}
    .ok{display:none;margin-bottom:10px;background:#eafff1;border:1px solid #b6f3c8;color:#176d3a;padding:10px;border-radius:12px}

    /* Galeria */
    .gallery{display:grid;gap:10px;grid-template-columns:repeat(2,1fr)}
    @media(min-width:900px){.gallery{grid-template-columns:repeat(3,1fr)}}
    .gallery img{width:100%;aspect-ratio:1/1;object-fit:cover;border-radius:14px;cursor:pointer;box-shadow:0 6px 16px rgba(0,0,0,.08)}

    .modal{display:none;position:fixed;inset:0;background:rgba(0,0,0,.85);z-index:9999}
    .modal img{max-width:92vw;max-height:88vh;position:absolute;top:0;bottom:0;left:0;right:0;margin:auto;border-radius:12px}

    footer{background:#20181b;color:#fff;margin-top:24px}
    footer .wrap{display:flex;justify-content:space-between;align-items:center;gap:10px;flex-wrap:wrap;padding:16px}
    footer a{color:#ffd1e6;text-decoration:none}
    .pill{background:#38262d;padding:8px 12px;border-radius:999px}
  </style>
</head>
<body>
  <header>
    <img src="assets/hero.jpg" alt="Karina - Nail designer">
    <h1>Karinails.Design</h1>
    <p>Agendamento online â€¢ ã‚ªãƒ³ãƒ©ã‚¤ãƒ³äºˆç´„<br/>Gel â€¢ é•·ã•å‡ºã— â€¢ ãƒ‡ã‚¶ã‚¤ãƒ³</p>
  </header>

  <main class="wrap">
    <section class="grid">
      <!-- ServiÃ§os -->
      <div class="card">
        <h2>ServiÃ§os / ã‚µãƒ¼ãƒ“ã‚¹</h2>
        <div class="service"><h3>Esmaltadas em gel / ã‚¸ã‚§ãƒ«ãƒã‚¤ãƒ«ã‚«ãƒ©ãƒ¼</h3><div class="yen">Â¥3,000</div></div>
        <div class="service"><h3>Alongamento + 1 cor / é•·ã•å‡ºã—ï¼‹ãƒ¯ãƒ³ã‚«ãƒ©ãƒ¼</h3><div class="yen">Â¥4,500</div></div>
        <div class="service"><h3>Alongamento + decoraÃ§Ãµes + pedrarias / é•·ã•å‡ºã—ï¼‹ãƒ‡ã‚¶ã‚¤ãƒ³ï¼‹ã‚¹ãƒˆãƒ¼ãƒ³</h3><div class="yen">Â¥6,000</div></div>
        <div class="service"><h3>ManutenÃ§Ã£o (AtÃ© 28 dias) / ãƒªãƒšã‚¢ï¼ˆ28æ—¥ä»¥å†…ï¼‰</h3><div class="yen">Â¥4,000</div></div>
      
      </div>

      <!-- Agendar -->
      <div class="card">
        <h2>Agendar / ã”äºˆç´„</h2>
        <div id="ok" class="ok">Agendamento salvo! / äºˆç´„å®Œäº†ã—ã¾ã—ãŸã€‚</div>

        <label>Nome / ãŠåå‰</label>
        <input id="nome" class="input" placeholder="Ex.: Karina / ã‚«ãƒªãƒŠ">

        <label>ServiÃ§o / ã‚µãƒ¼ãƒ“ã‚¹</label>
        <select id="servico" class="select">
          <option>Esmaltadas em gel / ã‚¸ã‚§ãƒ«ãƒã‚¤ãƒ«ã‚«ãƒ©ãƒ¼</option>
          <option>Alongamento + 1 cor / é•·ã•å‡ºã—ï¼‹ãƒ¯ãƒ³ã‚«ãƒ©ãƒ¼</option>
          <option>Alongamento + decoraÃ§Ãµes + pedrarias / é•·ã•å‡ºã—ï¼‹ãƒ‡ã‚¶ã‚¤ãƒ³ï¼‹ã‚¹ãƒˆãƒ¼ãƒ³</option>
          <option>ManutenÃ§Ã£o (AtÃ© 28 dias) / ãƒªãƒšã‚¢ï¼ˆ28æ—¥ä»¥å†…ï¼‰</option>
          
        </select>

        <div class="row">
          <div>
            <label>Data / æ—¥ä»˜</label>
            <input type="date" id="data" class="input">
          </div>
          <div>
            <label>Hora / æ™‚é–“</label>
            <input type="time" id="hora" class="input">
          </div>
        </div>

        <button id="btn" class="btn">Agendar / äºˆç´„</button>

        <!-- Admin PIN -->
        <div style="margin-top:14px;border-top:1px dashed #e7c9d7;padding-top:10px">
          <details>
            <summary>ğŸ” Admin (PIN)</summary>
            <label>PIN</label>
            <input type="password" id="pin" class="input" placeholder="****">
            <button id="btn-admin" class="btn" style="margin-top:8px">Entrar</button>

            <div id="area-admin" style="display:none;margin-top:10px">
              <h3>Agendamentos</h3>
              <ul id="lista" class="muted" style="padding-left:18px"></ul>
              <button id="btn-clear" class="btn" style="background:#6b7280">Limpar todos / å…¨å‰Šé™¤</button>
            </div>
          </details>
          <div class="muted" style="font-size:12px">Fuso: Asia/Tokyo â€¢ ãƒ‡ãƒ¼ã‚¿ã¯ç«¯æœ«ï¼ˆãƒ–ãƒ©ã‚¦ã‚¶ï¼‰ã«ä¿å­˜ã•ã‚Œã¾ã™ã€‚</div>
        </div>
      </div>

      <!-- Galeria -->
      <div class="card">
        <h2>Galeria / ä½œå“</h2>
        <div class="gallery">
          <img src="assets/nails-red.jpg" alt="Unhas vermelhas">
          <img src="assets/nails-blue.jpg" alt="Unhas azul/rosa">
          <img src="assets/hero.jpg" alt="Karina">
        </div>
      </div>
    </section>
  </main>

  <footer>
    <div class="wrap" style="display:flex;gap:10px;justify-content:space-between;align-items:center;flex-wrap:wrap">
      <div>Â© 2025 Karinails.design â€¢ Hiroshima</div>
      <div class="pill">@ do Instagram: <a href="https://instagram.com/karinails.design" target="_blank" style="margin-left:6px">@karinails.design</a></div>
      <div class="pill"><a href="https://wa.me/818057360208" target="_blank">+81 80-5736-0208</a></div>
    </div>
  </footer>

  <!-- Modal foto grande -->
  <div class="modal" id="modal" onclick="this.style.display='none'">
    <img id="modal-img" src="">
  </div>

<script>
document.addEventListener('DOMContentLoaded', () => {
  // === CONFIG ===
  const WEB_APP_URL = "https://script.google.com/macros/s/AKfycbzLPCBEiUo7WTF2jwC0aDQNpBkuJQevwOtjfhRYpTLZSWAye2-5XBsGUEr2mC6mcmg2/exec";
  const PIN = "0911";
  const MIN_LEAD_MIN = 120;

  // --- pega elementos (com checagem) ---
  const el = id => document.getElementById(id);
  const okBox     = el('ok');
  const nomeInput = el('nome');
  const servSel   = el('servico');
  const dataInput = el('data');
  const horaInput = el('hora');
  const btnAg     = el('btn');
  const pinInput  = el('pin');
  const btnAdmin  = el('btn-admin');
  const areaAdmin = el('area-admin');
  const listaUl   = el('lista');
  const btnClear  = el('btn-clear');

  // se algo essencial nÃ£o existir, avisa e sai
  const required = [
    ['ok', okBox], ['nome', nomeInput], ['servico', servSel],
    ['data', dataInput], ['hora', horaInput], ['btn', btnAg],
    ['pin', pinInput], ['btn-admin', btnAdmin], ['area-admin', areaAdmin],
    ['lista', listaUl], ['btn-clear', btnClear]
  ];
  for (const [name, node] of required) {
    if (!node) { alert('Elemento faltando no HTML: #' + name); return; }
  }

  // data mÃ­nima = amanhÃ£
  (function(){
    try{
      const d=new Date(); d.setDate(d.getDate()+1);
      const p=n=>String(n).padStart(2,'0');
      dataInput.value = ${d.getFullYear()}-${p(d.getMonth()+1)}-${p(d.getDate())};
    }catch(_){}
  })();

  // -------- AGENDAR (POST) --------
  btnAg.addEventListener('click', async () => {
    const nome = nomeInput.value.trim();
    const serv = servSel.value;
    const data = dataInput.value;
    const hora = horaInput.value;

    if(!nome || !serv || !data || !hora){
      alert('Preencha todos os campos / å…¨ã¦å…¥åŠ›ã—ã¦ãã ã•ã„');
      return;
    }
    const when = new Date(${data}T${hora}:00);
    if(when - new Date() < MIN_LEAD_MIN*60000){
      alert('Precisa de 2h de antecedÃªncia / 2æ™‚é–“å‰ã¾ã§ã«äºˆç´„ã—ã¦ãã ã•ã„');
      return;
    }

    try{
      await fetch(WEB_APP_URL, {
        method: 'POST',
        mode: 'no-cors', // enviamos, nÃ£o lemos resposta
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({ nome, servico: serv, data, hora, pin: PIN })
      });

      okBox.style.display = 'block';
      nomeInput.value = '';
      horaInput.value = '';
    }catch(e){
      alert('Erro ao enviar. Tente novamente.');
    }
  });

  // -------- ADMIN (GET) --------
  btnAdmin.addEventListener('click', async () => {
    const pin = pinInput.value.trim();
    if(pin !== PIN){ alert('PIN incorreto / PINãŒé•ã„ã¾ã™'); return; }

    try{
      const res = await fetch(WEB_APP_URL + '?pin=' + encodeURIComponent(PIN));
      if(!res.ok) throw new Error('HTTP ' + res.status);
      const data = await res.json();
      if(!data.ok){ alert('Erro ao consultar.'); return; }

      const rows = (data.rows || [])
        .sort((a,b)=>(a.data+a.hora).localeCompare(b.data+b.hora));

      listaUl.innerHTML = rows.length
        ? rows.map(r => <li>${r.data} ${r.hora} â€” ${r.nome} (${r.servico})</li>).join('')
        : '<li>(sem agendamentos)</li>';

      areaAdmin.style.display = 'block';
    }catch(e){
      alert('Erro de rede ao consultar.');
    }
  });

  // limpar sÃ³ a lista da tela (nÃ£o apaga a planilha)
  btnClear.addEventListener('click', () => {
    listaUl.innerHTML = '<li>(sem agendamentos)</li>';
  });

  // Modal da galeria (fotos grandes)
  document.querySelectorAll('.gallery img').forEach(img=>{
    img.addEventListener('click', ()=>{
      document.getElementById('modal-img').src = img.src;
      document.getElementById('modal').style.display='block';
    });
  });
});
</script>
</body>
</html>
